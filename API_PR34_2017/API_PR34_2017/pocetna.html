<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.3/css/ol.css" type="text/css">
    <style>
        div#map1 {
            height: 400px;
            width: 400px;
        }
        div#map {
            height: 400px;
            width: 400px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.3/build/ol.js"></script>



    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="Scripts/jquery-3.5.1.js"></script>


    <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.1/css/ol.css" type="text/css">
    <style>
        .map {
            height: 400px;
            width: 100%;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.1/build/ol.js"></script>-->


    <script src="Scripts/jquery.js"></script>
    <script>
        $(document).ready(function () {

            let user = sessionStorage.getItem("logovan");
            console.log('user ' + user);
            var korisnik = $.parseJSON(user);

            var tabelica = document.getElementById('tabelaMani');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }
            $.ajax({
                type: 'POST',
                url: '/api/Korisnik/ListaManifestacije',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                //  data: JSON.stringify(korisnik),
                success: function (data) {
                    console.log("success");

                    console.log("petlja...pocinje" + data);

                    var jsonObj = JSON.parse(data);

                    for (i = 0; i < jsonObj.length; i++) {


                        var tip;
                        if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                            tip = "Koncert";
                        } else if (jsonObj[i].Tipmanifestacije == 1) {
                            tip = "Festival";
                        } else if (jsonObj[i].Tipmanifestacije == 2) {
                            tip = "Pozoriste";
                        }

                        var poster = jsonObj[i].Poster;



                        var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                        row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                        row += "<td >" + tip + "</td>";
                        row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                        row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                        row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                        row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                        row += "<td >" + jsonObj[i].Cenavip + "</td>";
                        row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                        var ocena;
                        if (jsonObj[i].Ocena == 0) {
                            ocena = "";
                        } else {
                            ocena = jsonObj[i].Ocena;
                        }

                        row += "<td >" + ocena + "</td>";
                        var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                        var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                        var obrisidugme = "";
                        var aktivirajdugme = "";
                        var izmenidugme = "";
                        if (korisnik != null) {
                            if (korisnik.Uloga == 0) {
                                obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                if (jsonObj[i].Status == 1) {
                                    //alert("status neaktivan");
                                    aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                }
                            }
                            if (korisnik.Uloga == 2) {//ako je kupac
                                obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                            }
                            if (korisnik.Uloga == 1)//uloga PRODAVAC
                            {
                                izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                            }
                        }
                        row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                        //row += "<td><input type=\"submit\" id=\"dugme" + i + "\" onclick=\"return detalji(" + tip+ ");\" value=\"Detaljan prikaz\"/></td>";
                        row += "</tr>";

                        $("#tabelaMani").append(row);


                    }
                },
                error: function (data) {
                    alert("Greska!");
                }

            });
            //*********
            //let filteri = sessionStorage.getItem("filteri");
            //alert('filteri ' + filteri);
            //var fil = $.parseJSON(filteri);
            //alert("fil" + fil);
            ////**********
            //if (filteri["manifestacija"] != null) {
            //    document.getElementById('polovi').value = filteri["manifestacija"];
            //}
            //if (filteri["karta"] != null) {
            //    document.getElementById('polovi').value = filteri["karta"];
            //}



            $("#btnIzmeni").click(function () {
                let user = sessionStorage.getItem("logovan");
                console.log('user ' + user);
                var korisnik = $.parseJSON(user);
                let izm = sessionStorage.getItem("izmena");
                console.log("izmena ;;; " + izm);
                // console.log('user ' + user);
                var polja = $.parseJSON(izm);
                polja = polja.id;
                console.log("ide je " + polja);
                //brise ovo sto je sacuvano da je odabrano za izmenu

                let k1 = document.getElementById('_naziv');
                let k2 = document.getElementById('_datumivreme');
                let k3 = document.getElementById('_ulicabroj');
                let k4 = document.getElementById('_grad');
                let k5 = document.getElementById('_postanskibroj');
                let k6 = document.getElementById('_brojmesta');
                let k7 = document.getElementById('_vreme');
                let k8 = document.getElementById('_cenaregular');

                if (!k1.checkValidity()) {
                    alert("Ponovo unesite naziv. Naziv sme da sadrzi slova i cifre.")
                } else if ($("#_brojmesta").val() == '') {
                    alert('Unesite broj mesta.');
                } else if (!k2.checkValidity()) {
                    alert('Datum mora biti u formatu DD-MM-YYYY');
                } else if ($("#_time").val() == '') {
                    alert('Unesite vreme.');
                } else if ($("#_cenaregular").val() == '') {
                    alert('Uneiste cenu karte.');
                }
                else if (!k3.checkValidity()) {
                    alert("Unesite ispravno ulicu i broj.");
                } else if (!k4.checkValidity()) {
                    alert('Ponovo unesite grad/drzavu. Dozvoljena su samo slova.');
                } else if (!k5.checkValidity()) {
                    alert("Postanski broj mora da bude petocifreni broj");
                }
                //} else if (!$('#poster').val()) {
                //    alert("Odaberite sliku za poster");
                //}
                else {
                    var naziv = $("#_naziv").val();
                    var tipmanifestacije = $("#_tipovi option:selected").val();
                    var brojmesta = $("#_brojmesta").val();
                    var vreme = $("#_time").val();
                    var datumivreme = $("#_datumivreme").val();
                    var cenaregular = $("#_cenaregular").val();

                    var ulicabroj = $("#_ulicabroj").val();
                    var grad = $("#_grad").val();
                    var postanskibroj = $("#_postanskibroj").val();
                    // var poster = $("#poster").val();
                    var logoImg;
                    var novaSlika;
                    var formData = new FormData();
                    if ($('#_poster').get(0).files.length === 0) {
                        console.log("NIJE IZABRANA NOVA SLIKA");
                        var logoImg = jsonObj.Poster;
                        novaSlika = "nema";
                    } else {
                        logoImg = $("#_poster").get(0).files[0];
                        //var formData = new FormData();
                        novaSlika = 'ima';
                    }
                    formData.append('poster', logoImg);

                    //namestanje vremena da bude sa pm am
                    t = document.getElementById('_time').value
                    var [h, m] = t.split(":");

                    // datumivreme += " " + (h % 12 + 12 * (h % 12 == 0)) + ":" + m;//, h >= 12 ? 'PM' : 'AM';
                    datumivreme += " " + (h % 12 + 12 * (h % 12 == 0)) + ":" + m;//, h >= 12 ? 'PM' : 'AM';
                    if (h >= 12) {
                        datumivreme += " PM";
                    } else {
                        datumivreme += " AM";
                    }
                    console.log(datumivreme);

                    formData.append('novaslika', novaSlika);
                    formData.append('naziv', naziv);
                    formData.append('tipmanifestacije', tipmanifestacije);
                    formData.append('brojmesta', brojmesta);
                    formData.append('datumivreme', datumivreme);
                    formData.append('cenaregular', cenaregular);
                    formData.append('ulicabroj', ulicabroj);
                    formData.append('grad', grad);
                    formData.append('postanskibroj', postanskibroj);
                    formData.append('prodavac', korisnik.Korisnickoime);
                    formData.append('id', polja);
                    var Xk = 0;
                    var Yk = 0;
                    pozicije = sessionStorage.getItem("pozicija");
                    //alert("poz " + pozicije);
                    var pozXY = $.parseJSON(pozicije);
                    alert(pozXY);
                    if (pozXY != null) {
                        Xk = pozXY.Y;
                        Yk = pozXY.X;
                        //alert(Xk);
                        //alert(Yk);
                    }

                    //Yk = sessionStorage.getItem("pozicijaY");
                    formData.append('sirina', Xk);
                    formData.append('duzina', Yk);
                    console.log("tip->" + tipmanifestacije);


                    $.ajax({

                        type: "POST",
                        url: 'api/Korisnik/IzmeniFest',
                        data: formData,
                        contentType: false,
                        processData: false,
                        cache: false,
                        complete: function (data) {
                            console.log("success izmene manifestacije");

                            //povratna poruka
                            var poruka = "";
                            if (JSON.parse(JSON.parse(JSON.stringify(data)).responseJSON).length > 0)
                                poruka = JSON.parse(JSON.parse(JSON.stringify(data)).responseJSON);
                            //console.log(JSON.parse(JSON.parse(JSON.stringify(data)).responseJSON));
                            console.log(poruka);
                            if (poruka != "") {

                                if (poruka == "Ne mozete broj mesta smanjiti na manje od broja kupljenih karata.") {
                                    alert(poruka);
                                    console.log("ne moye smanjiti");

                                } else if (poruka == "Manifestacija se zavrsila,nije je moguce izmeniti.") {
                                    alert(poruka);
                                } else if (poruka == "Manifestacija ne moze biti u proslosti.") {
                                    alert(poruka);
                                } else if (poruka == "Neuspesno izmenjeno.") {
                                    alert(poruka);
                                } else if (poruka == "Postoji vec manifestacija u zadataom vremenu na zadatom mestu.") {
                                    alert(poruka);
                                }
                                else if (poruka == "Uspesno izmenjeno.") {
                                    sessionStorage.removeItem('izmena');
                                    sessionStorage.removeItem('pozicijaX');
                                    sessionStorage.removeItem('pozicijaY');
                                    alert("Uspesno izmenjeno.");
                                    var modal = document.getElementById("myModal3");
                                    modal.style.display = "none";
                                    document.getElementById('map').innerHTML = "";
                                    $("#_poster").val("");
                                    var tabelica = document.getElementById('tabelaMani');
                                    for (var i = 1; i < tabelica.rows.length;) {
                                        tabelica.deleteRow(i);
                                    }
                                    $.ajax({
                                        type: 'POST',
                                        url: '/api/Korisnik/ListaManifestacije',
                                        contentType: 'application/json; charset=utf-8',
                                        dataType: 'json',
                                        //  data: JSON.stringify(korisnik),
                                        success: function (data) {
                                            console.log("success");

                                            console.log("petlja...pocinje" + data);

                                            var jsonObj = JSON.parse(data);

                                            for (i = 0; i < jsonObj.length; i++) {


                                                var tip;
                                                if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                                    tip = "Koncert";
                                                } else if (jsonObj[i].Tipmanifestacije == 1) {
                                                    tip = "Festival";
                                                } else if (jsonObj[i].Tipmanifestacije == 2) {
                                                    tip = "Pozoriste";
                                                }

                                                var poster = jsonObj[i].Poster;



                                                var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                                                row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                                                row += "<td >" + tip + "</td>";
                                                row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                                                row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                                                row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                                                row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                                                row += "<td >" + jsonObj[i].Cenavip + "</td>";
                                                row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                                                var ocena;
                                                if (jsonObj[i].Ocena == 0) {
                                                    ocena = "";
                                                } else {
                                                    ocena = jsonObj[i].Ocena;
                                                }

                                                row += "<td >" + ocena + "</td>";
                                                var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                                                var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                                                var obrisidugme = "";
                                                var aktivirajdugme = "";
                                                var izmenidugme = "";
                                                if (korisnik != null) {
                                                    if (korisnik.Uloga == 0) {
                                                        obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                                        if (jsonObj[i].Status == 1) {
                                                            //alert("status neaktivan");
                                                            aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                                        }
                                                    }
                                                    if (korisnik.Uloga == 2) {//ako je kupac
                                                        obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                                    }
                                                    if (korisnik.Uloga == 1)//uloga PRODAVAC
                                                    {
                                                        izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                                    }
                                                }
                                                row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                                                //row += "<td><input type=\"submit\" id=\"dugme" + i + "\" onclick=\"return detalji(" + tip+ ");\" value=\"Detaljan prikaz\"/></td>";
                                                row += "</tr>";

                                                $("#tabelaMani").append(row);


                                            }
                                        },
                                        error: function (data) {
                                            alert("Greska!");
                                        }

                                    });
                                }
                            }


                        }
                    });

                    //refresh tabele sa manifestacijama
                    //prvo obrisati


                }


            });

            //PRETRAGA
            $("#pretraga").click(function () {
                let dat1 = document.getElementById('find_datumOD');
                let dat2 = document.getElementById('find_datumDO');
                let k2 = document.getElementById('find_mesto');
                let k1 = document.getElementById('find_naziv');



                if (!dat1.checkValidity() || !dat2.checkValidity()) {
                    alert("Unesite datum u naznacenom formatu dd-mm-yyyy");
                } else if (!k2.checkValidity()) {

                    alert("Unesite samo slova u polje za pretragu po mestu");//,bez suvisnih razmaka na pocetku i kraju");
                } //za naziv ne treba jer moze da sadrzi slova i cifre
                else if (!k1.checkValidity()) {
                    alert("Mozete uneti samo slova i cifre prilikom pretrage po nazivu");//,bez suvisnih razmaka na pocetku i kraju");
                }
                else {
                    var tabelica = document.getElementById('tabelaMani');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    var mesto = $("#find_mesto").val();
                    var naziv = $("#find_naziv").val();
                    var datumOD = $("#find_datumOD").val();
                    var datumDO = $("#find_datumDO").val();
                    var cenaOD = $("#find_cenaOD").val();
                    var cenaDO = $("#find_cenaDO").val();
                    var obj = JSON.stringify({
                        "mesto": mesto,
                        "naziv": naziv,
                        "datumOD": datumOD,
                        "datumDO": datumDO,
                        "cenaOD": cenaOD.toString(),
                        "cenaDO": cenaDO.toString()
                    });

                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/Pretraga',
                        data: obj,
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {

                            var jsonObj = JSON.parse(data);

                            for (i = 0; i < jsonObj.length; i++) {

                                var tip;
                                if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                    tip = "Koncert";
                                } else if (jsonObj[i].Tipmanifestacije == 1) {
                                    tip = "Festival";
                                } else if (jsonObj[i].Tipmanifestacije == 2) {
                                    tip = "Pozoriste";
                                }

                                var poster = jsonObj[i].Poster;

                                var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                                row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                                row += "<td >" + tip + "</td>";
                                row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                                row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                                row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                                row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                                row += "<td >" + jsonObj[i].Cenavip + "</td>";
                                row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                                var ocena;
                                if (jsonObj[i].Ocena == 0) {
                                    ocena = "";
                                } else {
                                    ocena = jsonObj[i].Ocena;
                                }

                                row += "<td >" + ocena + "</td>";
                                var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                                var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                                var obrisidugme = "";
                                var aktivirajdugme = "";

                                var izmenidugme = "";
                                if (korisnik != null) {
                                    if (korisnik.Uloga == 0) {
                                        obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                        if (jsonObj[i].Status == 1) {
                                            //alert("status neaktivan");
                                            aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                        }
                                    }
                                    if (korisnik.Uloga == 2) {//ako je kupac
                                        obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                    }
                                    if (korisnik.Uloga == 1)//uloga PRODAVAC
                                    {
                                        izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                    }
                                }
                                row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                                row += "</tr>";

                                $("#tabelaMani").append(row);


                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                }
            });

            $("#filter_tip").click(function () {
                var tipovi = $(".f_tip option:selected").val();
                //  $("#tabelaMani").empty();
                //$("#tabelaMani:not(:first)").remove();
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                // document.getElementById('tabelaMani') = tabelica;
                alert(tipovi);
                var obj = JSON.stringify({
                    "filter1": tipovi
                });

                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/TipoviFilter',
                    data: obj,
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        alert("rez fitera tipa");
                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }
                });
            });
            //second filter na stranici
            $("#filter_karta").click(function () {
                var karte = $("#f_karta option:selected").val();
                //  $("#tabelaMani").empty();
                //$("#tabelaMani:not(:first)").remove();
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                // document.getElementById('tabelaMani') = tabelica;
                alert(karte);
                var obj = JSON.stringify({
                    "filter2": karte
                });

                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/KarteFilter',
                    data: obj,
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        alert("rez fitera tipa");
                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }
                });
            });

            $("#sort_nazAZ").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortNazivAZ',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });

            $("#sort_nazZA").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortNazivZA',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });

            $("#sort_datum1").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/ListaManifestacije',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });
            $("#sort_datum2").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/DatumKasnije',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });
            $("#sort_mestoAZ").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortMestoAZ',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });
            $("#sort_mestoZA").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortMestoZA',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });
            $("#sort_cenaR").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortCenaRastuce',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });
            $("#sort_cenaO").click(function () {
                var tabelica = document.getElementById('tabelaMani');
                for (var i = 1; i < tabelica.rows.length;) {
                    tabelica.deleteRow(i);
                }
                $.ajax({
                    type: 'POST',
                    url: '/api/Korisnik/SortCenaOpadajuce',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    //  data: JSON.stringify(korisnik),
                    success: function (data) {
                        //alert("success");

                        //alert("petlja...pocinje" + data);

                        var jsonObj = JSON.parse(data);

                        for (i = 0; i < jsonObj.length; i++) {

                            var tip;
                            if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                tip = "Koncert";
                            } else if (jsonObj[i].Tipmanifestacije == 1) {
                                tip = "Festival";
                            } else if (jsonObj[i].Tipmanifestacije == 2) {
                                tip = "Pozoriste";
                            }

                            var poster = jsonObj[i].Poster;

                            var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                            row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                            row += "<td >" + tip + "</td>";
                            row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                            row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                            row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                            row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                            row += "<td >" + jsonObj[i].Cenavip + "</td>";
                            row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                            var ocena;
                            if (jsonObj[i].Ocena == 0) {
                                ocena = "";
                            } else {
                                ocena = jsonObj[i].Ocena;
                            }

                            row += "<td >" + ocena + "</td>";
                            var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                            var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                            var obrisidugme = "";
                            var aktivirajdugme = "";
                            var izmenidugme = "";
                            if (korisnik != null) {
                                if (korisnik.Uloga == 0) {
                                    obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                    if (jsonObj[i].Status == 1) {
                                        //alert("status neaktivan");
                                        aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                    }
                                }
                                if (korisnik.Uloga == 2) {//ako je kupac
                                    obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                }
                                if (korisnik.Uloga == 1)//uloga PRODAVAC
                                {
                                    izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                }
                            }
                            row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                            row += "</tr>";

                            $("#tabelaMani").append(row);


                        }
                    },
                    error: function (data) {
                        alert("Greska!");
                    }

                });
            });

            //****************date picket za pretragu
            //    var minDate = new Date();
            //$("#datum1").datepicker({
            //    showAnim: 'drop',
            //    numberOfMonth: 1,
            //    minDate: minDate,
            //    dateFormat: 'dd-mm-yyyy',
            //    onClose: function (selectedDate) {
            //        $("datum2").datepicker("option", "minDate", selectedDate);
            //    }
            //});

            //$("#datum1").datepicker({
            //    showAnim: 'drop',
            //    numberOfMonth: 1,
            //    minDate: minDate,
            //    dateFormat: 'dd-mm-yyyy',
            //    onClose: function (selectedDate) {
            //        $("datum2").datepicker("option", "minDate", selectedDate);
            //    }
            //});

            //    var values = [];
            //    var count = 0;
            //$("#tabelaMani").on("click", "tbody tr", function (event) {
            //    alert(values);
            //    $(this).find("td").each(function () {
            //        values[count] = $(this).text();
            //        count++;
            //    });
            //    alert("kliiik");
            //    for (i = 0; i < count; i++) {
            //        alert("podatak " + values[i]);
            //    }
            //    values.pop();
            //});
            //*************************radi kao niz


            if (user == null) {
                console.log("nije prij");
                $('#podaci').hide();
                $('#AdminView').hide();
                $('#ProView').hide();

            } else {
                $('#podaci').show();
                if (korisnik.Uloga == 0) {  //admin
                    $('#AdminView').show();

                    $('#tabelaSumnjivi').hide();    //prikaz sumnjivih
                    $('#userPrikaz').hide();
                    $('#ProView').hide();
                    $('#novaMani').hide();
                } else if (korisnik.Uloga == 1) {//prodavac
                    $('#AdminView').hide();
                    $('#ProView').show();
                    $('#novaMani').hide();
                } else if (korisnik.Uloga == 2) {//kupac
                    $('#AdminView').hide();
                    $('#ProView').hide();
                    $('#novaMani').hide();
                }
                //detaljniji prikaz manifestacija
                $("#sumnjivi").click(function () {
                    $('#tabelaSumnjivi').show();
                    var tabelica = document.getElementById('sumnjiviTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Karte/SumnjiviKorisnici',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'BLOKIRAN';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#sumnjiviTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

                $("#dodaj_prodavca").click(function () {
                    $('#userPrikaz').hide();

                    var span = document.getElementsByClassName("close")[0];
                    var modal = document.getElementById("myModal");
                    // When the user clicks on the button, open the modal
                    // btn.onclick = function() {
                    modal.style.display = "block";
                    //}

                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function () {
                        modal.style.display = "none";
                    }
                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
                    //----------------------------------
                    $("#korisnickoime").val("");
                    $("#lozinka").val("");
                    $("#ime").val("");
                    $("#prezime").val("");
                    document.getElementById('polovi').selectedIndex = 0;
                    $("#datumrodjenja").val("");

                });
                $("#btnReg").click(function () {
                    let k1 = document.getElementById("korisnickoime");
                    let k2 = document.getElementById("lozinka");
                    let k3 = document.getElementById("ime");
                    let k4 = document.getElementById("prezime");
                    let k5 = document.getElementById("datumrodjenja");

                    // if (!k1.checkValidity() || !k2.checkValidity() || !k3.checkValidity() || !k4.checkValidity() || !k5.checkValidity()) {
                    //   alert("Molimo popunite sva polja na ispravan način.");
                    if (!k1.checkValidity()) {
                        alert("Korisnicko ime moze da sadrzi samo slova i cifre.[3-]");
                    } else if (!k2.checkValidity()) {
                        alert("Lozinka moze da sadrzi samo slova i cifre.[4-]");
                    } else if (!k3.checkValidity()) {
                        alert("Ime moze da sadrzi samo slova.[3-]");
                    } else if (!k4.checkValidity()) {
                        alert("Prezime moze da sadrzi samo slova.[3-]");
                    } else if (!k5.checkValidity()) {
                        alert("Datum unesite u formatu DD-MM-YYYY");
                    }
                    else {
                        var korisnickoime = $("#korisnickoime").val();
                        var lozinka = $("#lozinka").val();
                        var ime = $("#ime").val();
                        var prezime = $("#prezime").val();
                        var pol = $("#polovi option:selected").val();//$("#pol").val();
                        var datumrodjenja = $("#datumrodjenja").val();
                        var obj = JSON.stringify({
                            "korisnickoime": korisnickoime,
                            "lozinka": lozinka,
                            "ime": ime,
                            "prezime": prezime,
                            "pol": pol,
                            "datumrodjenja": datumrodjenja

                        });

                        $.ajax({
                            type: 'POST',
                            url: '/api/Korisnik/DodajProdavca',
                            data: obj,
                            contentType: 'application/json; charset=utf-8',
                            dataType: 'json',
                            success: function (data) {
                                alert(JSON.parse(data));
                                if (JSON.parse(data) == 'Uspesno ste dodali.') {
                                    var modal = document.getElementById("myModal");
                                    modal.style.display = "none";

                                    $("#korisnickoime").val("");
                                    $("#lozinka").val("");
                                    $("#ime").val("");
                                    $("#prezime").val("");
                                    document.getElementById('polovi').selectedIndex = 0;
                                    $("#datumrodjenja").val("");
                                }
                                //if (data == 1) {
                                //    alert('Uspesno ste dodali.');
                                //    $(location).attr('href', 'login.html');
                                //} else if (data == 2) {
                                //    alert('Postoji korisnik sa tim korisnickim imenom.');
                                //} else {
                                //    alert('Niste uneli ispravan datum rodjenja.');
                                //}
                            }
                        });

                    }
                });

                $("#svi_korisnici").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/SviKorisnici',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            // alert("u json korisnci" + data);

                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td >" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";

                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

                $("#ime_AZ").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciImeAZ',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

                $("#ime_ZA").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciImeZA',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

                $("#prz_AZ").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciPrzAZ',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });
                $("#prz_ZA").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciPrzZA',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });
                $("#korime_AZ").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciKorImeAZ',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });
                $("#a_pretraga").click(function () {
                    $('#userPrikaz').show();//da li treba????
                    var kor = $('#a_korime').val();
                    var ime = $('#a_ime').val();
                    var prz = $('#a_prz').val();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }

                    var obj = JSON.stringify({
                        "korime": kor,
                        "ime": ime,
                        "prezime": prz
                    });
                    if (!(document.getElementById('a_ime')).checkValidity()) {
                        alert("Ime mora da sadrzi samo slova,bez suvisnih razmaka na pocetku i kraju.");
                    } else if (!(document.getElementById('a_prz')).checkValidity()) {
                        alert("Prezime mora da sadrzi samo slova,bez suvisnih razmaka na pocetku i kraju.");
                    } else if (!(document.getElementById('a_korime')).checkValidity()) {
                        alert("Korisnicko ime moze da sadrzi samo slova i cifre.");
                    } else {
                        $.ajax({
                            type: 'POST',
                            url: '/api/Korisnik/PretragaKorisnika',
                            data: obj,
                            contentType: 'application/json; charset=utf-8',
                            dataType: 'json',
                            success: function (data) {
                                var lista = JSON.parse(data);
                                //alert("u json korisnci" + data);

                                for (i = 0; i < lista.length; i++) {

                                    var uloga;
                                    if (lista[i].Uloga == 0) {
                                        uloga = "Administrator";
                                    } else if (lista[i].Uloga == 1) {
                                        uloga = "Prodavac";
                                    } else if (lista[i].Uloga == 2) {
                                        uloga = "Kupac";
                                    }
                                    var pol;
                                    if (lista[i].Pol == 1) {
                                        pol = 'Zenski';
                                    } else {
                                        pol = 'Muski';
                                    }
                                    var obrisan;
                                    if (lista[i].Obrisan == false) {
                                        obrisan = "";
                                    } else {
                                        obrisan = 'OBR/BLOK';
                                    }

                                    var row = "<tr class=\"success\">";
                                    row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                    row += "<td >" + lista[i].Ime + "</td>";
                                    row += "<td >" + lista[i].Prezime + "</td>";
                                    row += "<td >" + pol + "</td>";
                                    row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                    row += "<td >" + uloga + "</td>";
                                    row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                    row += "<td >" + obrisan + "</td>";
                                    if (obrisan == "" && uloga != "Administrator") {
                                        row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                    }
                                    else {
                                        row += "<td></td>";
                                    }
                                    row += "</tr>";
                                    $("#userTabela").append(row);

                                }
                            },
                            error: function (data) {
                                alert("Greska!");
                            }
                        });
                    }
                });
                $("#korime_ZA").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciKorImeZA',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });
                $("#bodoviR").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciBodoviRastuce',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

                $("#bodoviO").click(function () {
                    $('#userPrikaz').show();
                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/KorisniciBodoviOpadajuce',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',

                        success: function (data) {

                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });
                $("#k_filter_tip").click(function () {
                    var tipovi = $(".k_tip option:selected").val();

                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    // document.getElementById('tabelaMani') = tabelica;
                    console.log(tipovi);
                    var obj = JSON.stringify({
                        "filter1": tipovi
                    });

                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/TipoviKorisnikaFilter',
                        data: obj,
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                }
                                else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });
                });

                $("#k_filter_uloga").click(function () {
                    var tipovi = $(".k_uloga option:selected").val();

                    var tabelica = document.getElementById('userTabela');
                    for (var i = 1; i < tabelica.rows.length;) {
                        tabelica.deleteRow(i);
                    }
                    // document.getElementById('tabelaMani') = tabelica;
                    console.log(tipovi);
                    var obj = JSON.stringify({
                        "filter1": tipovi
                    });

                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/UlogaKorisnikaFilter',
                        data: obj,
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            var lista = JSON.parse(data);
                            console.log("u json korisnci" + data);
                            //var korisnici = JSON.stringify(data);
                            //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 1) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan = "";
                                } else {
                                    obrisan = 'OBR/BLOK';
                                }

                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                if (obrisan == "" && uloga != "Administrator") {
                                    row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                                } else {
                                    row += "<td></td>";
                                }
                                row += "</tr>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });
                });

                var Xkoor = 0;
                var Ykoor = 0;

                $("#addFest").click(function () {
                    // $('#novaMani').show();
                    var span = document.getElementsByClassName("close")[1];
                    var modal = document.getElementById("myModal2");

                    modal.style.display = "block";

                    span.onclick = function () {
                        modal.style.display = "none";
                        document.getElementById('map1').innerHTML = "";
                    }

                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                            document.getElementById('map1').innerHTML = "";
                        }
                    }
                    //---------------------------------------
                    $("#naziv").val("");
                    document.getElementById('tipovi').selectedIndex = 0;
                    $("#brojmesta").val("");
                    $("#time").val("");
                    $("#datumivreme").val("");
                    $("#cenaregular").val("");
                    $("#ulicabroj").val("");
                    $("#grad").val("");
                    $("#postanskibroj").val("");
                    $("#poster").val("");
                    // $("[type='file']").clearFiles();

                    //poziva mapa


                    var map = new ol.Map({
                        target: 'map1',
                        layers: [
                            new ol.layer.Tile({
                                source: new ol.source.OSM()
                            })
                        ],
                        view: new ol.View({
                            center: ol.proj.fromLonLat([37.41, 8.82]),
                            zoom: 4
                        })
                    });


                    map.on('click', function (evt) {
                        console.info(evt.pixel);
                        console.info(map.getPixelFromCoordinate(evt.coordinate));
                        console.info(ol.proj.toLonLat(evt.coordinate));
                        var coords = ol.proj.toLonLat(evt.coordinate);
                        var lat = coords[1];
                        var lon = coords[0];
                        var locTxt = "Latitude: " + lat + " Longitude: " + lon;
                        // coords is a div in HTML below the map to display
                        //document.getElementById('coords').innerHTML = locTxt;
                        alert(locTxt);
                        Xkoor = lon;
                        Ykoor = lat;
                    });

                });

                $("#btnFest").click(function () {
                    let k1 = document.getElementById('naziv');
                    let k2 = document.getElementById('datumivreme');
                    let k3 = document.getElementById('ulicabroj');
                    let k4 = document.getElementById('grad');
                    let k5 = document.getElementById('postanskibroj');
                    let k6 = document.getElementById('brojmesta');
                    let k7 = document.getElementById('vreme');
                    let k8 = document.getElementById('cenaregular');

                    if (!k1.checkValidity()) {
                        alert("Ponovo unesite naziv. Naziv sme da sadrzi slova i cifre.")
                    } else if ($("#brojmesta").val() == '') {
                        alert('Unesite broj mesta.');
                    } else if (!k2.checkValidity()) {
                        alert('Datum mora biti u formatu DD-MM-YYYY');
                    } else if ($("#time").val() == '') {
                        alert('Unesite vreme.');
                    } else if ($("#cenaregular").val() == '') {
                        alert('Uneiste cenu karte.');
                    }
                    else if (!k3.checkValidity()) {
                        alert("Unesite ispravno ulicu i broj.");
                    } else if (!k4.checkValidity()) {
                        alert('Ponovo unesite grad/drzavu. Dozvoljena su samo slova.');
                    } else if (!k5.checkValidity()) {
                        alert("Postanski broj mora da bude petocifreni broj");
                    } else if (!$('#poster').val()) {
                        alert("Odaberite sliku za poster");
                    } else if (Xkoor == 0 || Ykoor == 0) {
                        alert('Niste oznacili lokaciju na mapi');
                    }
                    else {
                        var naziv = $("#naziv").val();
                        var tipmanifestacije = $("#tipovi option:selected").val();
                        var brojmesta = $("#brojmesta").val();
                        var vreme = $("#time").val();
                        var datumivreme = $("#datumivreme").val();
                        var cenaregular = $("#cenaregular").val();

                        var ulicabroj = $("#ulicabroj").val();
                        var grad = $("#grad").val();
                        var postanskibroj = $("#postanskibroj").val();
                        // var poster = $("#poster").val();

                        var logoImg = $("#poster").get(0).files[0];
                        var formData = new FormData();
                        formData.append('poster', logoImg);

                        //namestanje vremena da bude sa pm am
                        t = document.getElementById('time').value
                        var [h, m] = t.split(":");

                        // datumivreme += " " + (h % 12 + 12 * (h % 12 == 0)) + ":" + m;//, h >= 12 ? 'PM' : 'AM';
                        datumivreme += " " + (h % 12 + 12 * (h % 12 == 0)) + ":" + m;//, h >= 12 ? 'PM' : 'AM';
                        if (h >= 12) {
                            datumivreme += " PM";
                        } else {
                            datumivreme += " AM";
                        }
                        console.log(datumivreme);

                        formData.append('naziv', naziv);
                        formData.append('tipmanifestacije', tipmanifestacije);
                        formData.append('brojmesta', brojmesta);
                        formData.append('datumivreme', datumivreme);
                        formData.append('cenaregular', cenaregular);
                        formData.append('ulicabroj', ulicabroj);
                        formData.append('grad', grad);
                        formData.append('postanskibroj', postanskibroj);
                        formData.append('prodavac', korisnik.Korisnickoime);
                        formData.append('sirina', Xkoor);
                        formData.append('duzina', Ykoor);
                        console.log("tip->" + tipmanifestacije);

                        alert("Koordinate: " + Xkoor + "  " + Ykoor);
                        $.ajax({

                            type: "POST",
                            url: 'api/Korisnik/DodajFest',
                            data: formData,
                            contentType: false,
                            processData: false,
                            cache: false,
                            complete: function (data) {
                                console.log("success dodavanje manifestacije");
                                var poruka = "";
                                if (JSON.parse(JSON.parse(JSON.stringify(data)).responseJSON).length > 0)
                                    poruka = JSON.parse(JSON.parse(JSON.stringify(data)).responseJSON);
                                if (poruka == "Manifestacija ne moze biti u proslosti.") {
                                    alert(poruka);
                                } else if (poruka == "Postoji vec manifestacija u zadatom vremenu na zadatom mestu") {
                                    alert(poruka);
                                } else if (poruka == "Greska sa slikom") {
                                    alert(poruka);
                                }
                                else if (poruka == "Uspesno dodata manifestacija.") {
                                    alert(poruka);
                                    $('#novaMani').hide();
                                    // $("#maniPrikaz").load("#tabelaMani");              //zakomentarisno,pre je bilo!!!!!!!!!!!!!!!!!!

                                    var modal = document.getElementById("myModal2");
                                    modal.style.display = "none";


                                    $("#naziv").val("");
                                    document.getElementById('tipovi').selectedIndex = 0;
                                    $("#brojmesta").val("");
                                    $("#time").val("");
                                    $("#datumivreme").val("");
                                    $("#cenaregular").val("");
                                    $("#ulicabroj").val("");
                                    $("#grad").val("");
                                    $("#postanskibroj").val("");
                                    $("#poster").val("");
                                    //$("[type='file']").clearFiles();
                                    var tabelica = document.getElementById('tabelaMani');
                                    for (var i = 1; i < tabelica.rows.length;) {
                                        tabelica.deleteRow(i);
                                    }
                                    $.ajax({
                                        type: 'POST',
                                        url: '/api/Korisnik/ListaManifestacije',
                                        contentType: 'application/json; charset=utf-8',
                                        dataType: 'json',
                                        //  data: JSON.stringify(korisnik),
                                        success: function (data) {
                                            console.log("success");

                                            console.log("petlja...pocinje" + data);

                                            var jsonObj = JSON.parse(data);

                                            for (i = 0; i < jsonObj.length; i++) {


                                                var tip;
                                                if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                                                    tip = "Koncert";
                                                } else if (jsonObj[i].Tipmanifestacije == 1) {
                                                    tip = "Festival";
                                                } else if (jsonObj[i].Tipmanifestacije == 2) {
                                                    tip = "Pozoriste";
                                                }

                                                var poster = jsonObj[i].Poster;



                                                var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                                                row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                                                row += "<td >" + tip + "</td>";
                                                row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                                                row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                                                row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                                                row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                                                row += "<td >" + jsonObj[i].Cenavip + "</td>";
                                                row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                                                var ocena;
                                                if (jsonObj[i].Ocena == 0) {
                                                    ocena = "";
                                                } else {
                                                    ocena = jsonObj[i].Ocena;
                                                }

                                                row += "<td >" + ocena + "</td>";
                                                var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                                                var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                                                var obrisidugme = "";
                                                var aktivirajdugme = "";
                                                var izmenidugme = "";
                                                if (korisnik != null) {
                                                    if (korisnik.Uloga == 0) {
                                                        obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                                        if (jsonObj[i].Status == 1) {
                                                            //alert("status neaktivan");
                                                            aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                                        }
                                                    }
                                                    if (korisnik.Uloga == 2) {//ako je kupac
                                                        obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                                                    }
                                                    if (korisnik.Uloga == 1)//uloga PRODAVAC
                                                    {
                                                        izmenidugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-izmeni\"  style=\"margin-top: 5px;\">Izmeni</button>";
                                                    }
                                                }
                                                row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + izmenidugme + "</td>";
                                                //row += "<td><input type=\"submit\" id=\"dugme" + i + "\" onclick=\"return detalji(" + tip+ ");\" value=\"Detaljan prikaz\"/></td>";
                                                row += "</tr>";

                                                $("#tabelaMani").append(row);


                                            }
                                        },
                                        error: function (data) {
                                            alert("Greska!");
                                        }

                                    });
                                }//kad se uspesno popuni manifestacija

                            }
                        });

                        //refresh tabele sa manifestacijama
                        //prvo obrisati


                    }

                    //

                });

            }
            //document.getElementById('map').addEventListener("tap", event => {
            //    console.log(event);
            //});

        });
        //setTimeout(function () {
        //    $("#tabelaMani").load("pocetna.html #tabelaMani");
        //}, 2000); //refresh every 2 seconds
        //------------------------
        //var inputEle = document.getElementById('timeInput');


        //function onTimeChange() {
        //    var timeSplit = inputEle.value.split(':'),
        //        hours,
        //        minutes,
        //        meridian;
        //    hours = timeSplit[0];
        //    minutes = timeSplit[1];
        //    if (hours > 12) {
        //        meridian = 'PM';
        //        hours -= 12;
        //    } else if (hours < 12) {
        //        meridian = 'AM';
        //        if (hours == 0) {
        //            hours = 12;
        //        }
        //    } else {
        //        meridian = 'PM';
        //    }
        //    alert(hours + ':' + minutes + ' ' + meridian);
        //}
        //function print() {
        //    t = document.getElementById('time').value
        //    var [h, m] = t.split(":");
        //    console.log((h % 12 + 12 * (h % 12 == 0)) + ":" + m, h >= 12 ? 'PM' : 'AM');
        //}
        $(document).on('click', '.use-address', function () {            // kada je button (čija je class = use-address) kliknut
            //alert("pokusaj klik");
            //var polja = (this.id).split('_');
            var polja = this.id;
            //console.log("nn" + polja[0] + "   xa" + polja);

            var obj = JSON.stringify({
                //"naziv": polja[0],
                //"datum": polja[1]
                "id": polja
            });
            sessionStorage.setItem('dogadjaj', obj);        //cuvanje odabranog dogadjaja u sesiji i prelazak na njegov pregled
          
            $(location).attr('href', 'ManifestacijaPage.html');

        });
        //----------------------
        $(document).on('click', '.use-rez', function () {            // kada je button (čija je class = use-rez) kliknut
            //alert("pokusaj klik");
            var polja = (this.id).split('_');
            console.log("nn" + polja[0] + "   xa" + polja);

            var obj = JSON.stringify({
                "naziv": polja[0],
                "datum": polja[1],
                "cena": polja[2],
                "idman": polja[3]
            });
            sessionStorage.setItem('rez', obj);        //cuvanje odabranog dogadjaja u sesiji i prelazak na njegov pregled
            $(location).attr('href', 'RezervacijaKarte.html');

        });

        //brisanje manifestacije
        $(document).on('click', '.use-obrisi', function () {            // kada je button (čija je class = use-address) kliknut

            let user = sessionStorage.getItem("logovan");
            var korisnik = $.parseJSON(user);

            console.log("klik na obrisi");
            //var polja = (this.id).split('_');
            var polja = this.id;
            //console.log("nn" + polja[0] + "   xa" + polja);

            var obj = JSON.stringify({
                //"naziv": polja[0],
                //"datum": polja[1]
                "id": polja
            });
            //sessionStorage.setItem('dogadjaj', obj);        //cuvanje odabranog dogadjaja u sesiji i prelazak na njegov pregled
            //$(location).attr('href', 'ManifestacijaPage.html');

            var tabelica = document.getElementById('tabelaMani');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }

            $.ajax({
                type: 'POST',
                url: '/api/Korisnik/ObrisiManifestaciju',
                data: obj,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {

                    var jsonObj = JSON.parse(data);

                    for (i = 0; i < jsonObj.length; i++) {

                        var tip;
                        if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                            tip = "Koncert";
                        } else if (jsonObj[i].Tipmanifestacije == 1) {
                            tip = "Festival";
                        } else if (jsonObj[i].Tipmanifestacije == 2) {
                            tip = "Pozoriste";
                        }

                        var poster = jsonObj[i].Poster;

                        var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                        row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                        row += "<td >" + tip + "</td>";
                        row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                        row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                        row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                        row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                        row += "<td >" + jsonObj[i].Cenavip + "</td>";
                        row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                        var ocena;
                        if (jsonObj[i].Ocena == 0) {
                            ocena = "";
                        } else {
                            ocena = jsonObj[i].Ocena;
                        }

                        row += "<td >" + ocena + "</td>";
                        var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                        var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                        var obrisidugme = "";
                        var aktivirajdugme = "";
                        if (korisnik != null) {
                            if (korisnik.Uloga == 0) {
                                obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                if (jsonObj[i].Status == 1) {

                                    aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                }
                            }
                            if (korisnik.Uloga == 2) {//ako je kupac
                                obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                            }
                        }
                        row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + "</td>";
                        row += "</tr>";

                        $("#tabelaMani").append(row);


                    }
                },
                error: function (data) {
                    alert("Greska!");
                }
            });

        });

        $(document).on('click', '.use-aktiviraj', function () {            // kada je button (čija je class = use-address) kliknut

            let user = sessionStorage.getItem("logovan");
            var korisnik = $.parseJSON(user);

            console.log("klik na aktiviraj");
            //var polja = (this.id).split('_');
            var polja = this.id;
            //console.log("nn" + polja[0] + "   xa" + polja);

            var obj = JSON.stringify({
                //"naziv": polja[0],
                //"datum": polja[1]
                "id": polja
            });

            var tabelica = document.getElementById('tabelaMani');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }

            $.ajax({
                type: 'POST',
                url: '/api/Korisnik/AktivirajManifestaciju',
                data: obj,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {

                    var jsonObj = JSON.parse(data);

                    for (i = 0; i < jsonObj.length; i++) {

                        var tip;
                        if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                            tip = "Koncert";
                        } else if (jsonObj[i].Tipmanifestacije == 1) {
                            tip = "Festival";
                        } else if (jsonObj[i].Tipmanifestacije == 2) {
                            tip = "Pozoriste";
                        }

                        var poster = jsonObj[i].Poster;

                        var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                        row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                        row += "<td >" + tip + "</td>";
                        row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                        row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                        row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                        row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                        row += "<td >" + jsonObj[i].Cenavip + "</td>";
                        row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                        var ocena;
                        if (jsonObj[i].Ocena == 0) {
                            ocena = "";
                        } else {
                            ocena = jsonObj[i].Ocena;
                        }

                        row += "<td >" + ocena + "</td>";
                        var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                        var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                        var obrisidugme = "";
                        var aktivirajdugme = "";
                        if (korisnik != null) {
                            if (korisnik.Uloga == 0) {
                                obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                if (jsonObj[i].Status == 1) {

                                    aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                }
                            }
                            if (korisnik.Uloga == 2) {//ako je kupac
                                obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                            }
                        }
                        row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + "</td>";
                        row += "</tr>";

                        $("#tabelaMani").append(row);


                    }
                },
                error: function (data) {
                    alert("Greska!");
                }
            });

        });


        //za izmenu manifestacije
        $(document).on('click', '.use-izmeni', function () {

            // $('#novaMani').show();
            var span = document.getElementsByClassName("close")[2];
            var modal = document.getElementById("myModal3");

            modal.style.display = "block";

            span.onclick = function () {
                modal.style.display = "none";
                //brise mapu
                document.getElementById('map').innerHTML = "";
            }

            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                    //brise mapu
                    document.getElementById('map').innerHTML = "";
                }
            }
            //---------------------------------------
            console.log("klik na izmeni");
            var polja = this.id;                //preuzima ID MANIFESTACIJE
            // var polja = (this.id).split('_');
            // console.log("nn" + polja[0] + "   xa" + polja);

            var obj = JSON.stringify({
                //"naziv": polja[0],
                //"datum": polja[1]
                "id": polja
            });
            //       cuva se id te manifestacije za izmenu
            sessionStorage.setItem('izmena', obj);

             //document.getElementById('map').style.display = "inline-block";

            //var map = document.getElementById('map');
            //map.getMap().updateSize();
            //map.Get
            //map.updateSize();


            ////poziva mapa
            ////izvuci tacke
            
            //    var map = new ol.Map({
            //        target: 'map',
            //        layers: [
            //            new ol.layer.Tile({
            //                source: new ol.source.OSM()
            //            })
            //        ],
            //        view: new ol.View({
            //            center: center: fromLonLat([Xx, Yy]),
            //            zoom: 4
            //        })
            //    });
             

            //map.on('click', function (evt) {
            //    console.info(evt.pixel);
            //    console.info(map.getPixelFromCoordinate(evt.coordinate));
            //    console.info(ol.proj.toLonLat(evt.coordinate));
            //    var coords = ol.proj.toLonLat(evt.coordinate);
            //    var lat = coords[1];
            //    var lon = coords[0];
            //    var locTxt = "Latitude: " + lat + " Longitude: " + lon;
            //    // coords is a div in HTML below the map to display
            //    //document.getElementById('coords').innerHTML = locTxt;
            //    alert(locTxt);
            //});

            $.ajax({

                type: "POST",
                url: 'api/Korisnik/NadjiManifestaciju/',// + this.id,       //koristi id dugmeta sto ce biti naziv i datum sa vremenom
                dataType: "json",
                data: obj,
                contentType: "application/json; charset=utf-8",
                // async: false,
                success: function (data) {
                    console.log("success" + data);

                    // alert('dogadjaj obrisan' + obj);

                    jsonObj = JSON.parse(data);
                    document.getElementById("_naziv").value = jsonObj.Naziv;
                    document.getElementById('_tipovi').selectedIndex = jsonObj.Tipmanifestacije;
                    document.getElementById("_brojmesta").value = jsonObj.Brojmesta;

                    var time = jsonObj.Datumivreme.split(' ')[1] + " " + jsonObj.Datumivreme.split(' ')[2];
                    //alert(time);
                    // var hours = Number(time.match(/^(\d+)/)[1]);
                    var hours = parseInt(time.split(':')[0]);
                    //alert(hours);
                    //var minutes = Number(time.match(/:(\d+)/)[1]);
                    var minute = time.split(':')[1];
                    var minutes = parseInt(minute.split(' ')[0]);
                    //alert(minutes);
                    //var AMPM = time.match(/\s(.*)$/)[1];
                    var AMPM = minute.split(' ')[1];
                    //alert(AMPM);
                    if (AMPM == "PM" && hours < 12) hours = hours + 12;
                    if (AMPM == "AM" && hours == 12) hours = hours - 12;
                    var sHours = hours.toString();
                    var sMinutes = minutes.toString();
                    if (hours < 10) sHours = "0" + sHours;
                    if (minutes < 10) sMinutes = "0" + sMinutes;
                    //alert(sHours + ":" + sMinutes);
                    var vreme = sHours + ":" + sMinutes;

                    // document.getElementById("_time").value = jsonObj.Datumivreme.split(' ')[1];
                    document.getElementById("_time").value = vreme;
                    document.getElementById("_datumivreme").value = jsonObj.Datumivreme.split(' ')[0];
                    document.getElementById("_cenaregular").value = jsonObj.Cenaregular;
                    document.getElementById("_ulicabroj").value = jsonObj.Mestoodrzavanja.Ulicabroj;
                    document.getElementById("_grad").value = jsonObj.Mestoodrzavanja.Grad;
                    document.getElementById("_postanskibroj").value = jsonObj.Mestoodrzavanja.Postanskibroj;
                    //document.getElementById("_poster").value = jsonObj.Poster;
                    //<img src="Files/" + jsonObj.Poster + width=160 ></img >
                    //var slika = "Files/" + jsonObj.Poster;
                    ////<img src="{slika}" width="160"></img>
                    //var elem = document.createElement("img");
                    //elem.setAttribute("src", slika);

                    //elem.setAttribute("width", "160");
                    //elem.setAttribute("alt", "nema slike");
                    var foo = document.getElementById("fooBar");
                    foo.innerHTML = "<img src=\"Files/" + jsonObj.Poster + "\" width=\"160\" ></img>";


                    



                },
                error: function (data) {
                    console.log("ERROR : ", data);
                }
            });

            //poziva mapa
            //izvuci tacke
            var Xx;
            var Yy;
            //pozvati ajax da se nadju koordinate
            $.ajax({

                type: "POST",
                url: 'api/Korisnik/NadjiLokaciju',// + this.id,       //koristi id dugmeta sto ce biti naziv i datum sa vremenom
                dataType: "json",
                data: obj,
                contentType: "application/json; charset=utf-8",
                // async: false,
                success: function (data) {
                    console.log("success" + data);

                    // alert('dogadjaj obrisan' + obj);

                    jsonObj = JSON.parse(data);
                    //document.getElementById("_naziv").value = jsonObj.Naziv;
                    Yy = jsonObj.Geoduzina;     //latitute
                    Xx = jsonObj.Geosirina;
                    //alert(Xx + " koo" + Yy);
                    //alert(Xx);
                    //alert(Yy);
                    var map = new ol.Map({
                        target: 'map',
                        layers: [
                            new ol.layer.Tile({
                                source: new ol.source.OSM()
                            })
                        ],
                        view: new ol.View({
                            center: ol.proj.fromLonLat([Xx, Yy]),
                            zoom: 8
                        })
                    });

                    map.on('click', function (evt) {
                        console.info(evt.pixel);
                        console.info(map.getPixelFromCoordinate(evt.coordinate));
                        console.info(ol.proj.toLonLat(evt.coordinate));
                        var coords = ol.proj.toLonLat(evt.coordinate);
                        var lat = coords[1];
                        var lon = coords[0];
                        var locTxt = "Latitude: " + lat + " Longitude: " + lon;
                        // coords is a div in HTML below the map to display
                        //document.getElementById('coords').innerHTML = locTxt;
                        // alert(locTxt);
                        var objekat = JSON.stringify(
                            {
                                "X": lat,
                                "Y": lon
                            });
                       // alert(objekat);
                        sessionStorage.setItem('pozicija', objekat);
                        //sessionStorage.setItem('pozicijaY', lat);
                    });
                    
                },
                error: function (data) {
                    console.log("ERROR : ", data);
                }
            });


            /*
            alert(Xx);
            alert(Yy);
            var map = new ol.Map({
                target: 'map',
                layers: [
                    new ol.layer.Tile({
                        source: new ol.source.OSM()
                    })
                ],
                view: new ol.View({
                    center: ol.proj.fromLonLat([Xx, Yy]),
                    zoom: 5
                })
            });*/

            //map.on('click', function (evt) {
            //    console.info(evt.pixel);
            //    console.info(map.getPixelFromCoordinate(evt.coordinate));
            //    console.info(ol.proj.toLonLat(evt.coordinate));
            //    var coords = ol.proj.toLonLat(evt.coordinate);
            //    var lat = coords[1];
            //    var lon = coords[0];
            //    var locTxt = "Latitude: " + lat + " Longitude: " + lon;
            //    // coords is a div in HTML below the map to display
            //    //document.getElementById('coords').innerHTML = locTxt;
            //   // alert(locTxt);
            //    var objekat = JSON.stringify(
            //        {
            //            "X": lat,
            //            "Y": lon
            //        });
            //    alert(objekat);
            //    sessionStorage.setItem('pozicija', objekat);
            //    //sessionStorage.setItem('pozicijaY', lat);
            //});



        });

        $(document).on('click', '.use-ime', function () {            // kada je button (čija je class = use-address) kliknut
            //alert("pokusaj klik");
            var polje = this.id;
            console.log("korisnik koji je odabran" + polje);

            var obj = JSON.stringify({
                "korime": polje
            });
            //sessionStorage.setItem('dogadjaj', obj);        //cuvanje odabranog dogadjaja u sesiji i prelazak na njegov pregled
            //$(location).attr('href', 'ManifestacijaPage.html');

            var tabelica = document.getElementById('userTabela');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }

            $.ajax({
                type: 'POST',
                url: '/api/Korisnik/ObrisiKorisnika',
                data: obj,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    var lista = JSON.parse(data);

                    for (i = 0; i < lista.length; i++) {

                        var uloga;
                        if (lista[i].Uloga == 0) {
                            uloga = "Administrator";
                        } else if (lista[i].Uloga == 1) {
                            uloga = "Prodavac";
                        } else if (lista[i].Uloga == 2) {
                            uloga = "Kupac";
                        }
                        var pol;
                        if (lista[i].Pol == 1) {
                            pol = 'Zenski';
                        } else {
                            pol = 'Muski';
                        }
                        var obrisan;
                        if (lista[i].Obrisan == false) {
                            obrisan = "";
                        } else {
                            obrisan = 'OBR/BLOK';
                        }

                        var row = "<tr class=\"success\">";
                        row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                        row += "<td >" + lista[i].Ime + "</td>";
                        row += "<td >" + lista[i].Prezime + "</td>";
                        row += "<td >" + pol + "</td>";
                        row += "<td >" + lista[i].Datumrodjenja + "</td>";
                        row += "<td >" + uloga + "</td>";
                        row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                        row += "<td >" + obrisan + "</td>";
                        if (obrisan == "" && uloga != "Administrator") {
                            row += "<td><button type = \"button\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Obrisi</button><br><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";

                        } else {
                            row += "<td></td>";
                        }
                        row += "</tr>";
                        $("#userTabela").append(row);

                    }
                },
                error: function (data) {
                    alert("Greska!");
                }
            });


            //ozveziti prikaz sumnjivih ako se blokirao
            var tabelica = document.getElementById('sumnjiviTabela');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }
            $.ajax({
                type: 'POST',
                url: '/api/Karte/SumnjiviKorisnici',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',

                success: function (data) {

                    var lista = JSON.parse(data);
                    console.log("u json korisnci" + data);
                    //var korisnici = JSON.stringify(data);
                    //alert("korisnici" + korisnici);
                    for (i = 0; i < lista.length; i++) {

                        var uloga;
                        if (lista[i].Uloga == 0) {
                            uloga = "Administrator";
                        } else if (lista[i].Uloga == 1) {
                            uloga = "Prodavac";
                        } else if (lista[i].Uloga == 2) {
                            uloga = "Kupac";
                        }
                        var pol;
                        if (lista[i].Pol == 1) {
                            pol = 'Zenski';
                        } else {
                            pol = 'Muski';
                        }
                        var obrisan;
                        if (lista[i].Obrisan == false) {
                            obrisan = "";
                        } else {
                            obrisan = 'BLOKIRAN';
                        }

                        var row = "<tr class=\"success\">";
                        row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                        row += "<td >" + lista[i].Ime + "</td>";
                        row += "<td >" + lista[i].Prezime + "</td>";
                        row += "<td >" + pol + "</td>";
                        row += "<td >" + lista[i].Datumrodjenja + "</td>";
                        row += "<td >" + uloga + "</td>";
                        row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                        row += "<td >" + obrisan + "</td>";
                        if (obrisan == "" && uloga != "Administrator") {
                            row += "<td><button type = \"button\" style=\"margin-top:5px\" id=\"" + lista[i].Korisnickoime + "\" class=\"use-ime\">Blokiraj</button></td>";
                        } else {
                            row += "<td></td>";
                        }
                        row += "</tr>";
                        $("#sumnjiviTabela").append(row);

                    }
                },
                error: function (data) {
                    alert("Greska!");
                }
            });

            //});

            //osveziti i prikaz manifestacija ukoliko se prodavc obrisao
            var tabelica = document.getElementById('tabelaMani');
            for (var i = 1; i < tabelica.rows.length;) {
                tabelica.deleteRow(i);
            }

            $.ajax({
                type: 'POST',
                url: '/api/Korisnik/ListaManifestacije',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {

                    var jsonObj = JSON.parse(data);

                    for (i = 0; i < jsonObj.length; i++) {

                        var tip;
                        if (jsonObj[i].Tipmanifestacije == 0) {// Zlatni, Srebrni, Bronzani,Nepoznat
                            tip = "Koncert";
                        } else if (jsonObj[i].Tipmanifestacije == 1) {
                            tip = "Festival";
                        } else if (jsonObj[i].Tipmanifestacije == 2) {
                            tip = "Pozoriste";
                        }

                        var poster = jsonObj[i].Poster;

                        var row = "<tr id=\"nesto" + i + "\"class=\"success\">";
                        row += "<td id=\"colNaz\">" + jsonObj[i].Naziv + "</td>";
                        row += "<td >" + tip + "</td>";
                        row += "<td >" + jsonObj[i].Datumivreme + "</td>";
                        row += "<td >" + jsonObj[i].Mestoodrzavanja.Ulicabroj + " " + jsonObj[i].Mestoodrzavanja.Grad + " " + jsonObj[i].Mestoodrzavanja.Postanskibroj + "</td>";
                        row += "<td valign=\"middle\" align=\"center\" ><img src=\"Files/" + poster + "\" width=\"100\" ></img></td>";
                        row += "<td >" + jsonObj[i].Cenaregular + "</td>";
                        row += "<td >" + jsonObj[i].Cenavip + "</td>";
                        row += "<td >" + jsonObj[i].Cenafanpit + "</td>";
                        var ocena;
                        if (jsonObj[i].Ocena == 0) {
                            ocena = "";
                        } else {
                            ocena = jsonObj[i].Ocena;
                        }

                        row += "<td >" + ocena + "</td>";
                        var nazivdatum_id = jsonObj[i].Naziv + "_" + jsonObj[i].Datumivreme;
                        var rezkarte = nazivdatum_id + "_" + jsonObj[i].Cenaregular + "_" + jsonObj[i].IDmanifestacije;
                        var obrisidugme = "";
                        var aktivirajdugme = "";
                        if (korisnik != null) {
                            if (korisnik.Uloga == 0) {
                                obrisidugme = "<button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-obrisi\"  style=\"margin-top: 5px;\">Obrisi</button>";
                                if (jsonObj[i].Status == 1) {

                                    aktivirajdugme = "<br><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-aktiviraj\"  style=\"margin-top: 5px;\">Aktiviraj</button>";
                                }
                            }
                            if (korisnik.Uloga == 2) {//ako je kupac
                                obrisidugme = "<button type = \"button\" id=\"" + rezkarte + "\" class=\"use-rez\"  style=\"margin-top: 5px;\">Rezervacija</button>";
                            }
                        }
                        row += "<td><button type = \"button\" id=\"" + jsonObj[i].IDmanifestacije + "\" class=\"use-address\">Detaljniji prikaz</button><br>" + obrisidugme + aktivirajdugme + "</td>";
                        row += "</tr>";

                        $("#tabelaMani").append(row);


                    }
                },
                error: function (data) {
                    alert("Greska!");
                }
            });

        });


    </script>






    <title></title>
    <style>
        /* Add a black background color to the top navigation */
        .topnav {
            background-color: #333;
            /*background-color: rgba(41, 212, 255, 0.8);*/
            overflow: hidden;
            border-radius: 15px;
        }

            /* Style the links inside the navigation bar */
            .topnav a {
                float: left;
                color: #f2f2f2;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
                color: #ffffff;
            }

                /* Change the color of links on hover */
                .topnav a:hover {
                    background-color: #ddd;
                    color: black;
                }

                /* Add a color to the active/current link */
                .topnav a.active {
                    background-color: #4CAF50;
                    color: #ffffff;
                }

        #tekst {
            color: #ffffff;
        }

        button {
            border: none;
            height: 40px;
            outline: none;
            color: #ffffff;
            font-size: 15px;
            background-color: #333;
            color: #ffffff;
            cursor: pointer;
            border-radius: 20px;
        }

            button:hover {
                background-color: #4CAF50;
                color: #ffffff;
            }

        ::-webkit-input-placeholder {
            /*color: #ffffff;*/
            color: gray;
        }

        /*#dodajMani input[type=submit]:hover {
                background-color: cyan;
                color: #ffffff;
            }*/
        #userPrikaz {
            z-index: 2;
            /*left:50%;
            top:50%;
            transform:translate(-50%,-50%);
            width:60%;*/
            border-collapse: collapse;
            border-spacing: 0;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            background: #fafafa;
            text-align: center;
        }

        #tabelaMani {
            z-index: 2;
            /*left:50%;
            top:50%;
            transform:translate(-50%,-50%);
            width:60%;*/
            border-collapse: collapse;
            border-spacing: 0;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            background: #fafafa;
            text-align: center;
        }

        th, td {
            padding: 10px 15px;
        }

        #tabelaMani th {
            /*background: #ba68c8;*/
            background: rgba(51, 51, 51, 1);
            color: #fafafa;
            text-transform: uppercase;
        }

        #userPrikaz th {
            /*background: #ba68c8;*/
            background: rgba(51, 51, 51, 1);
            color: #fafafa;
            text-transform: uppercase;
        }

        #tabelaMani tr:nth-child(odd) {
            background: #eeeeee;
        }

        #userPrikaz tr:nth-child(odd) {
            background: #eeeeee;
        }

        html, table {
            /*overflow: scroll;*/
            overflow-y: scroll;
        }

        .header-img {
            height: 3%;
            width: 4%;
        }

        /*header skrol*/
        .header {
            position: sticky;
            top: 0;
            z-index: 1;
            width: 100%;
            background-color: #ffffff;
        }

        /* The progress container (grey background) */
        .progress-container {
            width: 100%;
            height: 8px;
            background: #ccc;
        }

        /* The progress bar (scroll indicator) */
        .progress-bar {
            height: 8px;
            background: #4caf50;
            width: 0%;
        }
        /*.content {
            padding: 100px 0;
            margin: 50px auto 0 auto;
            width: 80%;
        }*/

        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .modal-content {
            background-color: rgba(51, 51, 51, 0.9); /*#fefefe;*/
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 50%; /* Could be more or less, depending on screen size */
        }

        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

            .close:hover,
            .close:focus {
                color: black;
                text-decoration: none;
                cursor: pointer;
            }
    </style>
</head>
<body>
    <div class="header">
        <!--<h2>Scroll Indicator</h2>-->
        <h1 style="text-align:center;font-size: 40px ; color:#333"><img class="header-img" src="slike/odlican.png" alt="logo" />Karte</h1>
        <div id="stranica">
            <div class="topnav">
                <a class="active" href="pocetna.html"><i class="fa fa-fw fa-home"></i>Pocetna</a>
                <a href="login.html">Prijava</a>
                <a href="Register.html">Registracija</a>
                <a href="logout.html">Odjava</a>
                <div id="podaci">
                    <a href="detaljiProfil.html">Moji podaci</a>
                </div>


            </div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="myBar"></div>
        </div>
    </div>






    <div id="AdminView">
        <h3 style="color:#333">Vase opcije</h3>
        <input type="submit" id="svi_korisnici" value="Prikaz svih korisnika" />
        <input type="submit" id="dodaj_prodavca" value="Dodajte prodavca" />
        <input type="submit" id="sumnjivi" value="Sumnjivi korisnici" />
        <div id="tabelaSumnjivi">
            <table id="sumnjiviTabela" style=" display: inline-block;vertical-align: top;overflow: auto">
                <caption style="background-color:#333;color:white;margin-top:25px">Sumnjivi korisnici</caption>
                <tr>
                    <th>Korisnicko ime</th>
                    <th>Ime</th>
                    <th>Prezime</th>
                    <th>Pol</th>
                    <th>Datum rodjenja</th>
                    <th>Uloga</th>
                    <th>Sakupljeni poeni</th>
                    <th>Blokiran</th>
                    <th>Opcije</th>
                </tr>
            </table>
        </div>
        <div id="prodavac_add">
            <div id="myModal" class="modal">

                <!-- Modal content -->
                <div class="modal-content" style="text-align:center">
                    <span class="close">&times;</span>
                    <div id="DIVreg">
                        <h2 style="color:#ffffff; font-weight:bold; font-family:Arial;text-align-last: center;">Dodavanje prodavca</h2>
                        <!--<form action="" method="post">-->
                        <table class="table" style="margin-left: auto;
  margin-right: auto;">
                            <tr>
                                <td id="tekst" style="color:white;text-align:right;">Korisnicko ime:</td>
                                <td>
                                    <input type="text" id="korisnickoime" name="korisnickoime" placeholder="od 3 karakera min" pattern="[0-9a-zA-Z]{3,}" required />
                                </td>

                            </tr>

                            <tr>
                                <td id="tekst" style="color:white;text-align:right;">Lozinka:</td>
                                <td>
                                    <input type="password" id="lozinka" name="lozinka" placeholder="od 4 karaktera min" pattern="[0-9a-zA-Z]{4,}" required />
                                </td>

                            </tr>

                            <tr>
                                <td id="tekst" style="color:white;text-align:right;">Ime:</td>
                                <td>
                                    <input type="text" id="ime" name="ime" placeholder="od 3 karaktera min" pattern="[a-zA-Z]{3,}" required />
                                </td>

                            </tr>

                            <tr>
                                <td id="tekst" style="color:white;text-align:right;">Prezime:</td>
                                <td>
                                    <input type="text" id="prezime" name="prezime" placeholder="od 3 karaktera min" pattern="[a-zA-Z]{3,}" required />
                                </td>

                            </tr>

                            <tr>
                                <td id="tekst" style="color:white;text-align:right;"><label for="pol">Pol:</label></td>
                                <td>
                                    <select name="pol" id="polovi">
                                        <option id="polovi" value="Zenski">Zenski</option>
                                        <option id="polovi" value="Muski">Muski</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td id="tekst" style="color:white;text-align:right;">Datum rodjenja:</td>
                                <td>
                                    <input type="text" id="datumrodjenja" name="datumrodjenja" placeholder="DD-MM-YYYY" required pattern="\d{2}-\d{2}-\d{4}" />
                                </td>

                            </tr>

                            <tr>

                                <td colspan="2">
                                    <button id="btnReg" style="border-radius:0px;background-color:#4CAF50">Dodaj</button>
                                </td>
                            </tr>
                        </table>

                    </div>
                </div>

            </div>

        </div>
        <div id="userPrikaz" class="table-responsive">
            <div style=" display: inline-block;vertical-align: top;">
                <h4>Filtrirajte po tipu korisnike</h4>
                <select class="k_tip">
                    <option value="Sve">Svi tipovi</option>
                    <option value="Zlatni">Zlatni</option>
                    <option value="Srebrni">Srebrni</option>
                    <option value="Bronzani">Bronzani</option>
                    <option value="Nepoznat">Nepoznat</option>
                </select><button type="button" id="k_filter_tip">Filtriraj po tipu korisnike</button>
            </div>
            <div style=" display: inline-block;vertical-align: top;">
                <h4>Filtrirajte po ulozi</h4>
                <select class="k_uloga">
                    <option value="Sve">Sve uloge</option>
                    <option value="Administrator">Administrator</option>
                    <option value="Kupac">Kupac</option>
                    <option value="Prodavac">Prodavac</option>

                </select><button type="button" id="k_filter_uloga">Filtriraj po ulozi korisnike</button>
            </div>
            <div style=" display: inline-block;vertical-align: top;">
                <h4>Pretraga korisnika</h4>
                <input id="a_ime" type="text" placeholder="unesite ime" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
                <input id="a_prz" type="text" placeholder="unesite prezime" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
                <input id="a_korime" type="text" placeholder="unesite korisnicko ime" pattern="[0-9a-zA-Z]+" /><button type="button" id="a_pretraga">Pretrazi korisnike</button>
            </div>
            <table id="userTabela" style=" display: inline-block;vertical-align: top;overflow: auto">
                <caption style="background-color:#333;color:white;margin-top:25px">Korisnici</caption>
                <tr>
                    <th>Korisnicko ime</th>
                    <th>Ime</th>
                    <th>Prezime</th>
                    <th>Pol</th>
                    <th>Datum rodjenja</th>
                    <th>Uloga</th>
                    <th>Sakupljeni poeni</th>
                    <th>Obrisan</th>
                    <th>Opcije</th>
                </tr>
            </table>
            <ul style=" display: inline-block;vertical-align: top;list-style-type:none;">
                <li><h4>Sortiranja za korisnike</h4></li>
                <li style="margin-top: 5px;"><button id="ime_AZ">Sortiraj po imenu A-Z</button></li>
                <li style="margin-top: 5px;"><button id="ime_ZA">Sortiraj po imenu Z-A</button></li>
                <li style="margin-top: 5px;"><button id="prz_AZ">Sortiraj po prezimenu A-Z</button></li>
                <li style="margin-top: 5px;"><button id="prz_ZA">Sortiraj po prezimenu Z-A</button></li>
                <li style="margin-top: 5px;"><button id="korime_AZ">Sortiraj po korisnickom imenu A-Z</button></li>
                <li style="margin-top: 5px;"><button id="korime_ZA">Sortiraj po korisnickom imenu Z-A</button></li>
                <li style="margin-top: 5px;"><button id="bodoviR">Sortiraj po broju bodova rastuce</button></li>
                <li style="margin-top: 5px;"><button id="bodoviO">Sortiraj po broju bodova opadajuce</button></li>
            </ul>
        </div>
        <hr style="border: 2px solid#5b9aa0;" />
    </div>
    <div id="ProView">
        <h3 style="color:#333">Vase opcije</h3>
        <input type="submit" id="addFest" value="Dodaj manifestaciju" />
        <div id="myModal2" class="modal">

            <!-- Modal content -->
            <div class="modal-content" style="text-align:center">
                <span class="close">&times;</span>
                <!--<div id="novaMani">-->
                <h2 style="text-align:center;color:white">Dodavanje manifestacije</h2>
                <table style="margin-left: auto;margin-right: auto;">
                    <tr style="background:none">
                        <td id="tekst" style="color:white;text-align:right;">Naziv:</td>
                        <td><input type="text" name="naziv" id="naziv" placeholder="unesite naziv" pattern="^[0-9a-zA-Z]+( [0-9a-zA-Z]+)*$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Tip manifestacije:</td>
                        <td>
                            <select name="tipm" id="tipovi">
                                <option id="tipm" value="Koncert">Koncert</option>
                                <option id="tipm" value="Festival">Festival</option>
                                <option id="tipm" value="Pozoriste">Pozoriste</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Broj mesta:</td>
                        <td><input type="number" name="brojmesta" min="0" id="brojmesta" placeholder="unesite broj mesta" oninput="validity.valid||(value='');" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Datum odrzavanja:</td>
                        <td><input type="text" name="datumivreme" id="datumivreme" placeholder="DD-MM-YYYY" pattern="^([0-2][0-9]|(3)[0-1])-(((0)[0-9])|((1)[0-2]))-\d{4}$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Vreme odrzavanja:</td>
                        <td><input type="time" id="time" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Cena regular:</td>
                        <td><input type="number" name="cenaregular" min="0" id="cenaregular" placeholder="unesite cenu" oninput="validity.valid||(value='');" required /></td>
                    </tr>

                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Ulica i broj:</td>
                        <td><input type="text" name="ulicabroj" id="ulicabroj" placeholder="unesite ulicu i broj" pattern="^[0-9a-zA-Z]+( [0-9a-zA-Z]+)*$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Grad:</td>
                        <td><input type="text" name="grad" id="grad" placeholder="unesite grad" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" required /></td>

                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Postanski broj:</td>
                        <td><input type="text" name="postanskibroj" id="postanskibroj" placeholder="unesite postanski broj" pattern="[0-9]{5}" required /></td>

                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Poster:</td>
                        <td><input name="poster" type="file" id="poster" required style="color:white;align-content:center" /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Mapa:</td>
                        <td><div id="map1" class="map1"></div></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <button id="btnFest" style="border-radius:0px;background-color:#4CAF50">Dodaj</button>
                            <!--<input type="submit" onclick="print()" value="Dodaj" id="btnFest" />-->
                        </td>
                    </tr>

                </table>
                <!--</div>-->
            </div>
        </div>
        <div id="myModal3" class="modal">

            <!-- Modal content -->
            <div class="modal-content" style="text-align:center">
                <span class="close">&times;</span>
                <!--<div id="novaMani">-->
                <h2 style="text-align:center;color:white">Izmena manifestacije</h2>
                <table style="margin-left: auto;margin-right: auto;">
                    <tr style="background:none">
                        <td id="tekst" style="color:white;text-align:right;">Naziv:</td>
                        <td><input type="text" name="naziv" id="_naziv" placeholder="unesite naziv" pattern="^[0-9a-zA-Z]+( [0-9a-zA-Z]+)*$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Tip manifestacije:</td>
                        <td>
                            <select name="tipm" id="_tipovi">
                                <option id="_tipm" value="Koncert">Koncert</option>
                                <option id="_tipm" value="Festival">Festival</option>
                                <option id="_tipm" value="Pozoriste">Pozoriste</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Broj mesta:</td>
                        <td><input type="number" name="brojmesta" min="0" id="_brojmesta" placeholder="unesite broj mesta" oninput="validity.valid||(value='');" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Datum odrzavanja:</td>
                        <td><input type="text" name="datumivreme" id="_datumivreme" placeholder="DD-MM-YYYY" pattern="^([0-2][0-9]|(3)[0-1])-(((0)[0-9])|((1)[0-2]))-\d{4}$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Vreme odrzavanja:</td>
                        <td><input type="time" id="_time" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Cena regular:</td>
                        <td><input type="number" name="cenaregular" min="0" id="_cenaregular" placeholder="unesite cenu" oninput="validity.valid||(value='');" required /></td>
                    </tr>

                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Ulica i broj:</td>
                        <td><input type="text" name="ulicabroj" id="_ulicabroj" placeholder="unesite ulicu i broj" pattern="^[0-9a-zA-Z]+( [0-9a-zA-Z]+)*$" required /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Grad:</td>
                        <td><input type="text" name="grad" id="_grad" placeholder="unesite grad" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" required /></td>

                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Postanski broj:</td>
                        <td><input type="text" name="postanskibroj" id="_postanskibroj" placeholder="unesite postanski broj" pattern="[0-9]{5}" required /></td>

                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">Originalni poster:</td>
                        <td><span id="fooBar">&nbsp;</span></td>
                    </tr>
                    <tr>

                        <td id="tekst" style="color:white;text-align:right;">Novi poster:</td>
                        <td><input name="poster" type="file" id="_poster" required style="color:white;align-content:center" /></td>
                    </tr>
                    <tr>
                        <td id="tekst" style="color:white;text-align:right;">
                            Mapa:
                        </td>
                        <!--<td><div id="map" class="map"></div></td>-->
                        <td>
                            <div id="map" class="map"></div>
                            <!--<script type="text/javascript">
                                var map = new ol.Map({
                                    target: 'map',
                                    layers: [
                                        new ol.layer.Tile({
                                            source: new ol.source.OSM()
                                        })
                                    ],
                                    view: new ol.View({
                                        center: ol.proj.fromLonLat([37.41, 8.82]),
                                        zoom: 4
                                    })
                                });
                                //map.getMap().updateSize();
                               // map.updateSize();
                            </script>-->
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <button id="btnIzmeni" style="border-radius:0px;background-color:#4CAF50">Izmeni</button>
                            <!--<input type="submit" onclick="print()" value="Dodaj" id="btnFest" />-->
                        </td>
                    </tr>

                </table>
                <!--</div>-->
            </div>
        </div>
        <hr style="border: 2px solid#5b9aa0;" />
    </div>


    <div style=" display: inline-block;vertical-align: top;">
        <h4>Filtrirajte po tipu manifestacije</h4>
        <select class="f_tip">
            <option value="Sve">Sve manifestacije</option>
            <option value="Koncert">Koncert</option>
            <option value="Festival">Festival</option>
            <option value="Pozoriste">Pozoriste</option>
        </select><button type="button" id="filter_tip">Filtriraj po tipu</button>
    </div>
    <div style=" display: inline-block;vertical-align: top;">
        <h4>Filtrirajte po raspolozivosti karata</h4>
        <select name="kartafilter" id="f_karta">
            <option id="fkarta" value="Sve">Sve manifestacije</option>
            <option id="fkarta" value="Nerasprodate">Nerasprodate</option>

        </select><button type="button" id="filter_karta">Filtriraj po raspolozivosti karte</button>
    </div>
    <!--<p id="#resultas" style="color:black"></p>-->
    <h4>Sortiranja</h4>
    <button type="button" id="sort_nazAZ" style="margin-bottom:5px">Sortiraj po nazivu A-Z</button>
    <button type="button" id="sort_nazZA" style="margin-bottom:5px">Sortiraj po nazivu Z-A</button>
    <button type="button" id="sort_datum1" style="margin-bottom:5px">Sortiraj po datumu od najskorijeg</button>
    <button type="button" id="sort_datum2" style="margin-bottom:5px">Sortiraj po datumu od najkasnijeg</button>
    <button type="button" id="sort_cenaR" style="margin-bottom:5px">Sortiraj po ceni rastuce</button>
    <button type="button" id="sort_cenaO" style="margin-bottom:5px">Sortiraj po ceni opadajuce</button>
    <button type="button" id="sort_mestoAZ" style="margin-bottom:5px">Sortiraj po mestu A-Z</button>
    <button type="button" id="sort_mestoZA" style="margin-bottom:5px">Sortiraj po mestu Z-A</button>
    <h4>Pretraga</h4>
    <div class="container">
        <form>

            <div class="wrapper">

                <div class="search-container">
                    <input type="text" id="find_naziv" placeholder="naziv manifestacije" pattern="^[0-9a-zA-Z]+( [0-9a-zA-Z]+)*$" />
                    <input type="text" id="find_mesto" placeholder="mesto(drzava ili grad)" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
                    <input type="text" id="find_datumOD" placeholder="od datum dd-mm-yyyy" pattern="^([0-2][0-9]|(3)[0-1])-(((0)[0-9])|((1)[0-2]))-\d{4}$" />
                    <input type="text" id="find_datumDO" placeholder="do datum dd-mm-yyyy" pattern="^([0-2][0-9]|(3)[0-1])-(((0)[0-9])|((1)[0-2]))-\d{4}$" />
                    <input type="number" min="0" id="find_cenaOD" placeholder="cena regular od" pattern="[0-9]+" oninput="validity.valid||(value='');" />
                    <input type="number" min="0" id="find_cenaDO" placeholder="cena regular do" pattern="[0-9]+" oninput="validity.valid||(value='');" />


                    <!--<div class="input-daterange input-group" id="datepicker">
                        <input type="text" class="input-sm form-control" name="start" />
                        <span class="input-group-addon">to</span>
                        <input type="text" class="input-sm form-control" name="end" />
                    </div>-->
                    <button type="button" id="pretraga">Pretrazi</button>
                </div>
            </div>


        </form>


    </div>
    <div id="maniPrikaz" class="table-responsive">
        <h2 style="text-align:center">Manifestacije</h2>
        <table id="tabelaMani" style="margin-left: auto;
  margin-right: auto;">
            <tr>
                <th>Naziv</th>
                <th>Tip</th>
                <th>Datum i vreme</th>
                <th>Mesto</th>
                <th>Poster</th>
                <th>Cena regular</th>
                <th>Cena vip</th>
                <th>Cena fan pit</th>
                <th>Ocena</th>
                <th>Detaljnije</th>
            </tr>
        </table>
    </div>

    <!--<script type="text/javascript">
        var map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([37.41, 8.82]),
                zoom: 4
            })
        });
    </script>-->

    <!--<h2>My Map</h2>
    <div id="map" class="map"></div>-->
    <!--<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript">
        var map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([37.41, 8.82]),
                zoom: 4
            })
        });     //radilo

        //var baseMapLayer = new ol.layer.Tile({
        //    source: new ol.source.OSM()
        //});
        //var map = new ol.Map({
        //    target: 'map',
        //    layers: [baseMapLayer],
        //    view: new ol.View({
        //        center: ol.proj.fromLonLat([-74.0061, 40.712]),
        //        zoom: 7 //Initial Zoom Level
        //    })
        //});
        ////Adding a marker on the map
        //var marker = new ol.Feature({
        //    geometry: new ol.geom.Point(
        //        ol.proj.fromLonLat([-74.006, 40.7127])
        //    ),  // Cordinates of New York's Town Hall
        //});
        //var vectorSource = new ol.source.Vector({
        //    features: [marker]
        //});
        //var markerVectorLayer = new ol.layer.Vector({
        //    source: vectorSource,
        //});
        //map.addLayer(markerVectorLayer);
        self.map.on("singleclick", function (evt) {
            setPinOnMap(evt);
        })


        function setPinOnMap(evt) {
            var self = this;

            var latLong = ol.proj.transform(evt.coordinate, 'EPSG:3857', 'EPSG:4326');
            var lat = latLong[1];
            var long = latLong[0];

            self.params.options.mapClick({ lat: lat, long: long });

            if (self.dinamicPinLayer !== undefined) {
                console.log("moove")
                self.iconGeometry.setCoordinates(evt.coordinate);
                //or create another pin
            } else {
                self.iconGeometry = new ol.geom.Point(evt.coordinate);
                var iconFeature = new ol.Feature({
                    geometry: self.iconGeometry,
                    name: 'Null Island',
                    population: 4000,
                    rainfall: 500
                });
                var iconStyle = new ol.style.Style({
                    image: new ol.style.Icon(({
                        anchor: [0.5, 46],
                        anchorXUnits: 'fraction',
                        anchorYUnits: 'pixels',
                        size: [48, 48],
                        opacity: 1,
                        src: '/resources/cloud/controls/cloudMap/img/redmarker_small.png'
                    }))
                });

                iconFeature.setStyle(iconStyle);

                var vectorSource = new ol.source.Vector({
                    features: [iconFeature]
                });
                self.dinamicPinLayer = new ol.layer.Vector({
                    source: vectorSource
                });
                self.map.addLayer(self.dinamicPinLayer);
            }


        }
        //map = new OpenLayers.Map("map");
        //map.addLayer(new OpenLayers.Layer.OSM());

        //var lonLat = new OpenLayers.LonLat(-0.1279688, 51.5077286)
        //    .transform(
        //        new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
        //        map.getProjectionObject() // to Spherical Mercator Projection
        //    );

        //var zoom = 16;

        //var markers = new OpenLayers.Layer.Markers("Markers");
        //map.addLayer(markers);

        //markers.addMarker(new OpenLayers.Marker(lonLat));

        //map.setCenter(lonLat, zoom);

        //var newLonLat = new OpenLayers.LonLat(lon, lat);
        //var newPx = map.getLayerPxFromLonLat(newLonLat);
        //markers.moveTo(newPx);
        //jhjh


        //var marker = new ol.Feature({
        //    geometry: new ol.geom.Point(
        //        ol.proj.fromLonLat([-74.006, 40.7127])
        //    ),  // Cordinates of New York's Town Hall
        //});

        //var vectorSource = new ol.source.Vector({
        //    features: [marker]
        //});

        //var markerVectorLayer = new ol.layer.Vector({
        //    source: vectorSource,
        //});
        //map.addLayer(markerVectorLayer);
        //var layer = new ol.layer.Vector({
        //    source: new ol.source.Vector({
        //        features: [
        //            new ol.Feature({
        //                geometry: new ol.geom.Point(ol.proj.fromLonLat([4.35247, 50.84673]))
        //            })
        //        ]
        //    })
        //});
        //map.addLayer(layer);
        //map.addEventListener("tap", event => {
        //    console.log(event);
        //});
    </script>

    <script>
        window.onscroll = function () { myFunction() };

        function myFunction() {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (winScroll / height) * 100;
            document.getElementById("myBar").style.width = scrolled + "%";
        }</script>-->


</body>

</html>