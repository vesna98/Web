<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="Scripts/jquery-3.5.1.js"></script>
    <script>
        $(document).ready(function () {
            let user = sessionStorage.getItem("logovan");
            alert('user ' + user);
            var korisnik = $.parseJSON(user);;
            if (user == null) {
                alert("nije prij");
                $('#podaci').hide();
                $('#AdminView').hide();
            } else {
                $('#podaci').show();
                if (korisnik.Uloga == 0) {  //admin
                    $('#AdminView').show();
                    $('#userPrikaz').hide();
                } else if (korisnik.Uloga == 1) {//prodavac
                    $('#AdminView').hide();
                } else if (korisnik.Uloga == 2) {//kupac
                    $('#AdminView').hide();
                }


                $("#svi_korisnici").click(function () {
                    $('#userPrikaz').show();
                    $.ajax({
                        type: 'POST',
                        url: '/api/Korisnik/SviKorisnici',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                       
                        success: function (data) {
                            
                            var lista = JSON.parse(data);
                                alert("u json korisnci" + data);
                                //var korisnici = JSON.stringify(data);
                                //alert("korisnici" + korisnici);
                            for (i = 0; i < lista.length; i++) {

                                var uloga;
                                if (lista[i].Uloga == 0) {
                                    uloga = "Administrator";
                                } else if (lista[i].Uloga == 1) {
                                    uloga = "Prodavac";
                                } else if (lista[i].Uloga == 2) {
                                    uloga = "Kupac";
                                }
                                var pol;
                                if (lista[i].Pol == 0) {
                                    pol = 'Zenski';
                                } else {
                                    pol = 'Muski';
                                }
                                var obrisan;
                                if (lista[i].Obrisan == false) {
                                    obrisan ="";
                                } else {
                                    obrisan = 'OBRISAN';
                                }

                                // ImageUrl = poster;
                                // alert("petlja..." + jsonObj[i]);
                                var row = "<tr class=\"success\">";
                                row += "<td id=\"colNaz\">" + lista[i].Korisnickoime + "</td>";
                                row += "<td >" + lista[i].Ime + "</td>";
                                row += "<td >" + lista[i].Prezime + "</td>";
                                row += "<td >" + pol + "</td>";
                                row += "<td >" + lista[i].Datumrodjenja + "</td>";
                                row += "<td >" + uloga + "</td>";
                                row += "<td >" + lista[i].Sakupljenibodovi + "</td>";
                                row += "<td >" + obrisan + "</td>";
                                $("#userTabela").append(row);

                            }
                        },
                        error: function (data) {
                            alert("Greska!");
                        }
                    });

                });

            }

        });
    </script>
    <title></title>
    <style>
        /* Add a black background color to the top navigation */
            .topnav {
                /*background-color: #333;
                */
                background-color: rgba(41, 212, 255, 0.8);
                overflow: hidden;
            }

                /* Style the links inside the navigation bar */
                .topnav a {
                    float: left;
                    color: #f2f2f2;
                    text-align: center;
                    padding: 14px 16px;
                    text-decoration: none;
                    font-size: 17px;
                    color: saddlebrown;
                }

                    /* Change the color of links on hover */
                    .topnav a:hover {
                        background-color: #ddd;
                        color: black;
                    }

                    /* Add a color to the active/current link */
                    .topnav a.active {
                        /*background-color: #4CAF50;
                        background-color: rgba(76, 175, 80, 1);*/
                        background-color: #BC9862;
                        color: rgba(51, 51, 51, 1);
                    }

        #dodajMani {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: 400px;
            height: 500px;
            box-sizing: border-box;
            background: rgba(0,0,0,0.5);
            padding: 40px;
        }

        #tekst {
            /*font-weight: bold;*/
            color: #ffffff;
            /*font-family: Arial;*/
        }

        #dodajMani input[type=text], #DIVlogin input[type=password] {
            border: none;
            border-bottom: 1px solid #ffffff;
            background-color: transparent;
            outline: none;
            height: 40px;
            color: #ffffff;
        }

        ::-webkit-input-placeholder {
            color: #ffffff;
        }

        #dodajMani input[type=submit] {
            border: none;
            height: 40px;
            outline: none;
            color: #ffffff;
            font-size: 15px;
            background-color: tomato;
            cursor: pointer;
            border-radius: 20px;
        }

            #dodajMani input[type=submit]:hover {
                background-color: cyan;
                color: #ffffff;
            }

        table {
            z-index: 2;
            /*left:50%;
            top:50%;
            transform:translate(-50%,-50%);
            width:60%;*/
            border-collapse: collapse;
            border-spacing: 0;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            background: #fafafa;
            text-align: center;
        }

        th, td {
            padding: 10px 15px;
        }

        th {
            background: #ba68c8;
            color: #fafafa;
            text-transform: uppercase;
        }

        tr:nth-child(odd) {
            background: #eeeeee;
        }

        html, table {
            /*overflow: scroll;*/
            overflow-y: scroll;
        }

        .header-img {
            height: 3%;
            width: 4%;
        }
    </style>
</head>
<body style="background-color:#6c553d">

    <!--<h1 style="text-align:left;font-size: 40px;background-color: rgba(251, 220, 65, 1); color:rgba(51, 51, 51, 1) "><img class="header-img" src="slike/odlican.png" alt="logo" />Karte</h1>-->
            <h1 style="text-align:left;font-size: 40px ; color:#BC9862"><img class="header-img" src="slike/odlican.png" alt="logo" />Karte</h1>

    <div id="stranica">
        <div class="topnav">
            <a class="active" href="pocetna.html">Pocetna</a>
            <a href="login.html">Prijava</a>
            <a href="Register.html">Registracija</a>
            <a href="logout.html">Odjava</a>
            <div id="podaci">
                <a href="detaljiProfil.html">Moji podaci</a>
            </div>
            

        </div>
    </div>
    <div id="AdminView">
        <h3 style="color:white">Vase opcije</h3>
        <input type="submit" id="svi_korisnici" value="Prikaz svih korisnika" />
        <div id="userPrikaz" class="table-responsive">
            <table id="userTabela">
                <tr>
                    <th>Korisnicko ime</th>
                    <th>Ime</th>
                    <th>Prezime</th>
                    <th>Pol</th>
                    <th>Datum rodjenja</th>
                    <th>Uloga</th>
                    <th>Sakupljeni poeni</th>
                    <th>Obrisan</th>
                </tr>
            </table>
        </div>
    </div>
    <div id="maniPrikaz" class="table-responsive">
        <table id="tabelaMani">
            <tr>
                <th>Naziv</th>
                <th>Tip</th>
                <th>Datum i vreme</th>
                <th>Mesto</th>
                <th>Poster</th>
                <th>Cena</th>
                <th>Ocena</th>
                <th>Detaljnije</th>
            </tr>
        </table>
    </div>

</body>
</html>